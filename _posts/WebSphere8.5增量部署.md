---
title: WebSphere8.5增量部署
date: 2017-04-13 19:33:23
tags:
- WebSphere
- 集群
categories: 
- WebSphere
---
记录WebSphere8.5增量更新相较于全量更新的好处及部署方案

<!--more-->

# 概述

* 增量部署是和整包部署相对而言的，就是应用中哪些程序修改了就部署哪些，而不是每次都重新发布整个应用程序包。

* 整包部署每次都将整个应用程序打包成war包文件，当这个文件比较大的时候，发布一次应用的时间会很长，如果在集群环境上再进行节点同步，花费的时间将更长。

* 增量部署每次仅发布修改的程序，除非大的版本变化，一般情况下，大的仅几兆而已，程序部署的时间将大大缩短。

> 增量部署的优点：

* 部署的时间大大缩短
* 大部分的增量部署不需要停止或者重启应用，就不会停业务
* 因为不用停应用，实施部署的时段就不受限制

> 增量部署的缺点：

* 增量文件比较零散，容易漏掉文件

# 增量部署方式

> was8.5支持在控制台环境中进行操作,支持的增量部署方式包括：

* 全部应用程序
* 单个模块
* 单个文件
* 部分应用程序

> 适用以下安装应用执行替换、增加、删除操作（可任意组合）：

* 单个的 WEB 应用（war 包）
* EJB 应用（EJB jar 包）
* 包含 WEB 模块和 EJB 模块的企业应用（EAR 包）

通过上传压缩文件（标准的 ZIP 文件格式）的方式更新已安装的应用程序的多个文件。根据压缩文件的内容，使用此操作可以替换原有的文件、将新文件添加到已安装的应用程序、将某些文件从该应用程序删除。增量更新压缩文件中的每个文件的路径必须要严格对应原应用程序中的文件路径。

# 具体实现

## 全量更新

当整个项目的war包文件并不大且在更新的过程中不想停止应用（不停业务），我们就可以将整个war包压缩成标准格式的zip包，然后执行如下操作：

```bash
首先登陆was控制台
单击左侧菜单 "应用程序" -> "应用程序类型"  -> "WebSphere企业应用程序"
选择要更新的已安装的应用程序或模块，单击"更新"按钮
在"应用程序更新选项"界面中有四种更新方式，选择"替换、添加或删除多个文件"
"本地文件系统"中"选择文件"，选择之前压缩好的zip包，完成更新
```

## 增量更新

与全量更新的操作一样，压缩文件zip包中只包含要增加或者替换的文件，这些文件按照原来的目录结构放置到包目录中，上传后，war包目录中文件将会覆盖原目录中已存在的文件，不存在的文件将新增；要删除的文件，需要将文件及路径写入 META-INF/ibm-delete.props 文件，每行说明一个要删除的文件（此文件的路径和名称不能改变，文件必须是 ASCII 文件，行中可以包含字符串模式，如识别多个文件的正则表达式）

